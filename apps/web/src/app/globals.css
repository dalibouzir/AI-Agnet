@tailwind base;
@tailwind components;
@tailwind utilities;
@import "./markdown.css";

:root {
  --topbar-height: 64px;
  --color-primary: #0D6EFD;
  --color-accent: #E63946;
  --color-neutral: #FFFFFF;
  --color-bg: #0A0F1C;
  --bg-base: var(--color-neutral, #FFFFFF);
  --bg-elev: color-mix(in oklab, var(--bg-base) 94%, black 6%);
  --fg-base: #0F172A;
  --text-primary: #111827;
  --text-secondary: #4B5563;
  --border-subtle: rgba(15, 23, 42, 0.12);
  --border-strong: color-mix(in oklab, var(--text-secondary) 22%, transparent 78%);
  --surface-muted: color-mix(in oklab, var(--bg-base) 98%, black 2%);
  --surface-raised: color-mix(in oklab, var(--bg-base) 94%, black 6%);
  --surface-glass: color-mix(in oklab, var(--bg-base) 90%, black 10%);
  --shadow-soft: 0 18px 40px color-mix(in srgb, black 18%, transparent 82%);
  --shadow-elev: 0 28px 78px color-mix(in srgb, black 22%, transparent 78%);
  --shadow-glow: 0 0 32px color-mix(in srgb, var(--color-primary) 24%, transparent 76%);
  --shadow-accent: 0 0 24px color-mix(in srgb, var(--color-primary) 36%, transparent 64%);
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--color-primary) 38%, transparent 62%);
  --text-on-accent: color-mix(in oklab, black 92%, white 8%);
  --bg-overlay: color-mix(in srgb, var(--bg-base) 40%, rgba(0, 0, 0, 0.5) 60%);
  --gradient-brand: linear-gradient(
    135deg,
    var(--color-primary) 0%,
    color-mix(in oklab, var(--color-primary) 48%, var(--color-accent) 52%) 55%,
    var(--color-accent) 100%
  );
  --panel: var(--surface-raised);
  --panel-2: var(--surface-glass);
  --page: var(--bg-elev);
  --border: var(--border-strong);
  --text: var(--text-primary);
  --muted: var(--text-secondary);
  --accent: var(--color-primary);
  --focus: var(--focus-ring);
  --danger: color-mix(in srgb, var(--color-accent) 70%, red 30%);
  --warning: color-mix(in srgb, var(--color-accent) 45%, orange 55%);
  --success: color-mix(in srgb, var(--color-primary) 55%, limegreen 45%);
}

[data-theme='light'] {
  --bg-base: var(--color-neutral, #FFFFFF);
  --bg-elev: color-mix(in oklab, var(--bg-base) 96%, black 4%);
  --fg-base: #0F172A;
  --text-primary: #111827;
  --text-secondary: #4B5563;
  --border-subtle: rgba(15, 23, 42, 0.12);
  --border-strong: color-mix(in oklab, var(--text-secondary) 20%, transparent 80%);
  --surface-muted: color-mix(in oklab, var(--bg-base) 98%, black 2%);
  --surface-raised: color-mix(in oklab, var(--bg-base) 94%, black 6%);
  --surface-glass: color-mix(in oklab, var(--bg-base) 92%, black 8%);
  --shadow-soft: 0 18px 40px color-mix(in srgb, black 18%, transparent 82%);
  --shadow-elev: 0 28px 78px color-mix(in srgb, black 22%, transparent 78%);
  --shadow-glow: 0 0 26px color-mix(in srgb, var(--color-primary) 18%, transparent 82%);
  --shadow-accent: 0 0 20px color-mix(in srgb, var(--color-primary) 32%, transparent 68%);
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--color-primary) 38%, transparent 62%);
  --text-on-accent: color-mix(in oklab, black 92%, white 8%);
  --bg-overlay: color-mix(in srgb, var(--bg-base) 55%, rgba(0, 0, 0, 0.5) 45%);
}

[data-theme='dark'] {
  --bg-base: var(--color-bg, #0A0F1C);
  --bg-elev: color-mix(in oklab, var(--bg-base) 84%, white 16%);
  --fg-base: #E6EAF2;
  --text-primary: #EAF0FF;
  --text-secondary: #9CA3AF;
  --border-subtle: rgba(255, 255, 255, 0.08);
  --border-strong: color-mix(in oklab, var(--border-subtle) 55%, rgba(0, 0, 0, 0.35) 45%);
  --surface-muted: color-mix(in oklab, var(--bg-base) 82%, white 18%);
  --surface-raised: color-mix(in oklab, var(--bg-base) 78%, white 22%);
  --surface-glass: color-mix(in oklab, var(--bg-base) 72%, white 28%);
  --shadow-soft: 0 24px 64px color-mix(in srgb, black 55%, transparent 45%);
  --shadow-elev: 0 40px 120px color-mix(in srgb, black 62%, transparent 38%);
  --shadow-glow: 0 0 42px color-mix(in srgb, var(--color-primary) 32%, transparent 68%);
  --shadow-accent: 0 0 28px color-mix(in srgb, var(--color-primary) 44%, transparent 56%);
  --focus-ring: 0 0 0 3px color-mix(in srgb, var(--color-primary) 55%, transparent 45%);
  --text-on-accent: color-mix(in oklab, var(--bg-base) 35%, white 65%);
  --bg-overlay: color-mix(in srgb, var(--bg-base) 65%, rgba(0, 0, 0, 0.4) 35%);
}

[data-palette='light-a'] {
  --color-primary: #0D6EFD;
  --color-accent: #E63946;
  --color-neutral: #FFFFFF;
}

[data-palette='light-b'] {
  --color-primary: #4F46E5;
  --color-accent: #FF6B6B;
  --color-neutral: #F7F7FB;
}

[data-palette='light-c'] {
  --color-primary: #0EA5A4;
  --color-accent: #E64A19;
  --color-neutral: #FAFAFC;
}

[data-palette='dark-a'] {
  --color-primary: #00BFFF;
  --color-accent: #FF4D4D;
  --color-bg: #0A0F1C;
}

[data-palette='dark-b'] {
  --color-primary: #7C3AED;
  --color-accent: #FB7185;
  --color-bg: #0B1220;
}

[data-palette='dark-c'] {
  --color-primary: #3B82F6;
  --color-accent: #F472B6;
  --color-bg: #0C1324;
}

@layer base {
  * {
    border-color: var(--border-subtle);
  }

  body {
    min-height: 100vh;
    background:
      radial-gradient(140% 140% at 8% -10%, color-mix(in srgb, var(--color-primary) 18%, transparent 82%) 0%, transparent 58%),
      radial-gradient(120% 120% at 92% 12%, color-mix(in srgb, var(--color-accent) 16%, transparent 84%) 0%, transparent 52%),
      var(--bg-base);
    color: var(--text-primary);
    font-family: var(--font-inter, 'Inter', system-ui, sans-serif);
    font-size: 0.95rem;
    letter-spacing: -0.01em;
    line-height: 1.6;
    position: relative;
    margin: 0;
  }

  body::before,
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
  }

  body::before {
    background-image: radial-gradient(color-mix(in srgb, var(--color-primary) 14%, transparent 86%) 1px, transparent 0);
    background-size: 120px 120px;
    opacity: 0.35;
    mix-blend-mode: screen;
  }

  body::after {
    background: linear-gradient(
      120deg,
      color-mix(in srgb, var(--color-primary) 22%, transparent 78%) 0%,
      transparent 42%,
      color-mix(in srgb, var(--color-accent) 22%, transparent 78%) 100%
    );
    animation: drift-grid 26s linear infinite;
    opacity: 0.55;
  }

  main {
    min-height: 100vh;
    background-color: transparent;
    padding-top: var(--topbar-height);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-jakarta, 'Plus Jakarta Sans', var(--font-inter, 'Inter'));
    font-weight: 700;
    letter-spacing: -0.015em;
    color: var(--text-primary);
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  [role='button']:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
  }

  ::selection {
    background: color-mix(in srgb, var(--color-primary) 22%, transparent 78%);
    color: var(--text-primary);
  }
}

@layer utilities {
  .text-muted {
    color: var(--text-secondary);
  }

  .surface {
    position: relative;
    border-radius: 1.25rem;
    border: 1px solid color-mix(in srgb, var(--border-subtle) 60%, transparent 40%);
    background: linear-gradient(
      150deg,
      color-mix(in oklab, var(--surface-raised) 70%, transparent 30%) 0%,
      var(--surface-glass) 100%
    );
    box-shadow: var(--shadow-elev);
    backdrop-filter: blur(22px) saturate(160%);
  }

  .surface::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background:
      radial-gradient(circle at 20% 15%, color-mix(in srgb, var(--color-primary) 24%, transparent 76%), transparent 55%),
      radial-gradient(circle at 80% 12%, color-mix(in srgb, var(--color-accent) 24%, transparent 76%), transparent 52%);
    opacity: 0.75;
    pointer-events: none;
    mix-blend-mode: screen;
  }

  .surface-secondary {
    position: relative;
    border-radius: 1.25rem;
    border: 1px solid color-mix(in srgb, var(--border-subtle) 55%, transparent 45%);
    background: linear-gradient(
      160deg,
      color-mix(in oklab, var(--surface-glass) 70%, transparent 30%) 0%,
      var(--surface-raised) 100%
    );
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(26px) saturate(200%);
  }

  .surface-secondary::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background:
      radial-gradient(circle at 24% 22%, color-mix(in srgb, var(--color-primary) 22%, transparent 78%), transparent 62%),
      radial-gradient(circle at 76% 16%, color-mix(in srgb, var(--color-accent) 22%, transparent 78%), transparent 55%);
    opacity: 0.72;
    pointer-events: none;
    mix-blend-mode: screen;
  }

  .glow-ring {
    box-shadow:
      0 0 0 1px color-mix(in srgb, var(--color-primary) 45%, transparent 55%),
      0 0 20px color-mix(in srgb, var(--color-primary) 45%, transparent 55%);
  }
}

@keyframes drift-grid {
  0% {
    transform: translate3d(0, 0, 0);
  }
  50% {
    transform: translate3d(-6%, -4%, 0);
  }
  100% {
    transform: translate3d(0, 0, 0);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@import '../styles/shadows.css';
